package com.zero.customer.common.utils.reflect.self;import java.io.ByteArrayOutputStream;import java.io.File;import java.io.FileInputStream;import java.io.IOException;/** * All rights Reserved, Designed By Suixingpay. * * @author: 张得钧<zhang_dj   @   suixingpay.com> * @date: 2019-10-29 18:05 * @Copyright: 2019 Suixingpay. All rights reserved. * 注意：本内容仅限于随行付支付有限公司内部传阅，禁止外泄以及用于其他的商业用途。 */public class MyClassLoader extends ClassLoader {    private File baseDir;    public MyClassLoader(){        String basePath = MyClassLoader.class.getResource("").getPath();        this.baseDir = new File(basePath);    }    @Override    protected Class<?> findClass(String name) {        String className = MyClassLoader.class.getPackage().getName() + "." + name;        if(baseDir != null){            File classFile = new File(baseDir,name.replaceAll("\\.", "/") + ".class");            if(classFile.exists()){                FileInputStream in = null;                ByteArrayOutputStream out = null;                try{                    in = new FileInputStream(classFile);                    out = new ByteArrayOutputStream();                    byte [] buff = new byte[1024];                    int len;                    while ((len = in.read(buff)) != -1) {                        out.write(buff, 0, len);                    }                    return defineClass(className, out.toByteArray(), 0,out.size());                }catch (Exception e) {                    e.printStackTrace();                }finally{                    if(null != in){                        try {                            in.close();                        } catch (IOException e) {                            e.printStackTrace();                        }                    }                    if(null != out){                        try {                            out.close();                        } catch (IOException e) {                            e.printStackTrace();                        }                    }                    //先不删除，可以看到class文件内容                    //classFile.delete();                }            }        }        return null;    }}